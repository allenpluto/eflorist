<?php
/**
 * Created by PhpStorm.
 * User: User
 * Date: 8/02/2017
 * Time: 2:12 PM
 * Testing Subject: Convert DATAURI to file, attach to FormData and send through javascript
 */
define('PATH_SITE_BASE', dirname(__DIR__).DIRECTORY_SEPARATOR);
include('../system/config/config.php');
$start_stamp = microtime(1);


if (empty($_FILES['source_file']))
{
// TEST IMAGE ENTITY
    ?>
    <script src="/content/js/jquery-1.11.3.js"></script>
    <script>
        var source_file = 'data:image/jpeg;base64,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';
        function dataURItoBlob(dataURI) {
            var byteString = atob(dataURI.split(',')[1]);

            // separate out the mime component
            var mimeString = dataURI.split(',')[0].split(':')[1].split(';')[0];

            // write the bytes of the string to an ArrayBuffer
            var ab = new ArrayBuffer(byteString.length);
            var ia = new Uint8Array(ab);
            for (var i = 0; i < byteString.length; i++) {
                ia[i] = byteString.charCodeAt(i);
            }

            //New Code
            return new Blob([ab], {type: mimeString});
        }
        console.log('init');
        function submit_form()
        {
            var blob = dataURItoBlob(source_file);
            var data = new FormData();
            data.append('name', 'test image');
            data.append('source_file', blob);

            $.ajax({
                'type': 'POST',
                'processData': false,
                'contentType': false,
                'url': window.location.pathname,
                'data': data,
                'timeout': 10000
            }).always(function (callback_obj, status, info_obj) {
                console.log(callback_obj);
            });
        }
    </script>
    <a href="javascript:submit_form();">post blob</a>
<?php
}
else
{
    print_r($_FILES['source_file']);
    /*
    Sample Result
    Array
    (
        [name] => Hydrangeas.jpg
        [type] => image/jpeg
        [tmp_name] => /tmp/phpdWCetr
        [error] => 0
        [size] => 595284
    )*/
    $row = [
        'source_file' => $_FILES['source_file']['tmp_name'],
        'name' => $_POST['name']
    ];

    $entity_image = new entity_image();
    $entity_image->set(['row'=>[$row]]);
    print_r($entity_image);
}
exit;